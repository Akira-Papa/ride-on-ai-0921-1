# テスト失敗時：実装/テスト解析→修正→再実行ループ（テンプレ）
## 目的
- 失敗テストの根本原因を特定し、実装/テストを必要最小で直して合格まで回す。
## タスク内容
- 失敗ログの読み解き
- 再現最短ケースの切り出し
- 実装 or テストの責務ミス判定
- 修正→再実行の反復
## 使うタイミング
- Jest/Playwright いずれかが赤の時
## 入力
- テスト結果ログ
- 失敗テストのファイルパス/行
## 手順（ループ）
1) 失敗の型を分類（期待不一致/例外/タイムアウト/順序/非決定性）
2) 実装/テストのどちらの責務か判定
3) 最小再現ケースを新規追加 or 既存縮小
4) 実装側修正（仕様順守/副作用/冪等/時刻/並行性）
5) テスト側修正（不安定セレクタ/固定時刻/リトライ/Waitの適正化）
6) 再実行 → 緑まで反復
7) 回帰防止としてケースを1つ残す
## 出力
- 修正差分/テスト緑の証跡（スクショ/動画/レポート）
## サンプル（ダミー）
- 原因: 不安定なDOMセレクタ→ `getByRole` に統一